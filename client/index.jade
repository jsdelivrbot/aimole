doctype html
html(ng-app="aimole")
	head
		meta(charset="utf-8")
		title aimole
		meta(name="Description", content="let ai play against ai")
		meta(name="viewport", content="width=device-width, initial-scale=1")

		style
			include:stylus aimole-style.stylus

		if config && config.env && config.env.development
			link(href="/libs/ajax/libs/bootswatch/3.3.6/cerulean/bootstrap.min.css" rel="stylesheet" type="text/css")
			script(src="/libs/ajax/libs/angularjs/1.5.0/angular.min.js")
			script(src="/libs/ajax/libs/angularjs/1.5.0/angular-route.min.js")
			script(src="/libs/ajax/libs/angularjs/1.5.0/angular-cookies.min.js")
			script(src="/libs/ajax/libs/ace/1.2.3/ace.js")
			script(src="/libs/ajax/libs/jquery/2.2.0/jquery.min.js")
			script(src="/libs/ajax/libs/async/1.5.2/async.min.js")
			script(src="/libs/ajax/libs/lodash.js/4.6.1/lodash.min.js")
			script(src="/libs/ajax/libs/angular-ui-bootstrap/1.2.4/ui-bootstrap-tpls.min.js")
			script(src="/libs/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js")
			script(src="/libs/js/parse-latest.js")
			script(src="/libs/leoyuholo/parse-angular-patch/801fe2485b2719048d3e8c72f58c9542012b2417/dist/parse-angular.js")
			script(src="/libs/angular-ui/ui-ace/36844ff7c0e0d9445bc8e31514d7f0f59cb8b048/ui-ace.min.js")
		else
			style
				include ../public/libs/ajax/libs/bootswatch/3.3.6/cerulean/bootstrap.min.css
			script
				include ../public/libs/ajax/libs/angularjs/1.5.0/angular.min.js
				include ../public/libs/ajax/libs/angularjs/1.5.0/angular-route.min.js
				include ../public/libs/ajax/libs/angularjs/1.5.0/angular-cookies.min.js
				include ../public/libs/ajax/libs/ace/1.2.3/ace.js
				include ../public/libs/ajax/libs/jquery/2.2.0/jquery.min.js
				include ../public/libs/ajax/libs/lodash.js/4.6.1/lodash.min.js
				include ../public/libs/ajax/libs/angular-ui-bootstrap/1.2.4/ui-bootstrap-tpls.min.js
				include ../public/libs/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js
				include ../public/libs/js/parse-latest.js

	body#aimole

		div(ng-view)

		script
			include:coffee-script aimole-main.coffee
			include:coffee-script services/parseService.coffee
			include:coffee-script services/facebookService.coffee
			include:coffee-script services/userService.coffee
			include:coffee-script services/redirectService.coffee
			include:coffee-script services/messageService.coffee
			include:coffee-script services/modalService.coffee
			include:coffee-script services/matchService.coffee

		include games/games.jade
		include game/game.jade
		include directives/aimoleHeader/aimoleHeader.jade
		include directives/aimoleEditor/aimoleEditor.jade
		include modals/playMatchModal/playMatchModal.jade
		include modals/selectPlayerModal/selectPlayerModal.jade

		if config && config.aimole && config.aimole.fbAppId
			script.
				window.aimole = window.aimole || {};
				window.aimole.fbAppId = '#{config.aimole.fbAppId}';

		script.
			window.fbAsyncInit = function() {
				Parse.FacebookUtils.init({
					appId: window.aimole.fbAppId,
					xfbml: true,
					version: 'v2.5'
				});
			};

			(function(d, s, id){
				var js, fjs = d.getElementsByTagName(s)[0];
				if (d.getElementById(id)) {return;}
				js = d.createElement(s); js.id = id;
				js.src = "//connect.facebook.net/en_US/sdk.js";
				fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));

		if config && config.env && config.env.development
			script.
				(function(){
					document.write(
						'<script src="http://' +
						window.location.hostname +
						':35729\/livereload.js" type="text\/javascript"><\/script>'
					);
				}).call(this);
